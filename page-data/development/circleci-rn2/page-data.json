{"componentChunkName":"component---src-templates-blog-post-js","path":"/development/circleci-rn2/","webpackCompilationHash":"90517c772b144b3a2d6b","result":{"data":{"site":{"siteMetadata":{"title":"Philographer.dev","author":"Philographer","siteUrl":"https://philographer.github.io","comment":{"disqusShortName":"yoohoogun114","utterances":""},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"be97a87b-3750-58eb-a858-6ec4d8c5cda6","excerpt":"React Native 프로젝트에서 Fastlane을 사용하기 (IOS편) fastlane 아래 내용은 Getting Started · React Native 에 따라서 기본 환경을 구성했다는 전제 하에 진행됩니다. React Native Project 만들기 우선 샘플 프로젝트를 하나 만들도록 한다. 주의할 점은 로 만들지 말아야 한다는 것이다. 로 프로젝트를 만들면 로 동작하는 데 이용하면, 네이티브 프로젝트를 만들고 Native Code를 Testing…","html":"<h1 id=\"react-native-프로젝트에서-fastlane을-사용하기-ios편\"><a href=\"#react-native-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90%EC%84%9C-fastlane%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-ios%ED%8E%B8\" aria-label=\"react native 프로젝트에서 fastlane을 사용하기 ios편 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Native 프로젝트에서 Fastlane을 사용하기 (IOS편)</h1>\n<p><img src=\"https://docs.fastlane.tools/img/fastlane_text.png\" alt=\"fastlane\"></p>\n<blockquote>\n<p>아래 내용은 <a href=\"https://facebook.github.io/react-native/docs/getting-started.html\">Getting Started · React Native</a> 에 따라서 기본 환경을 구성했다는 전제 하에 진행됩니다.</p>\n</blockquote>\n<h1 id=\"react-native-project-만들기\"><a href=\"#react-native-project-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"react native project 만들기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Native Project 만들기</h1>\n<blockquote>\n<p>우선 샘플 프로젝트를 하나 만들도록 한다. 주의할 점은 <code class=\"language-text\">create-react-native-app</code>로 만들지 말아야 한다는 것이다. <code class=\"language-text\">crna</code>로 프로젝트를 만들면 <code class=\"language-text\">expo</code>로 동작하는 데 이용하면, 네이티브 프로젝트를 만들고 <strong>Native Code</strong>를 <strong>Testing</strong> 하는 것이 불가능하다.</p>\n</blockquote>\n<ul>\n<li>\n<p>아래 명령어로, project를 init한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ react-native init DevOpsForRN <span class=\"token comment\"># Native Project Initialize</span>\n$ <span class=\"token builtin class-name\">cd</span> DevOpsForRN</code></pre></div>\n</li>\n</ul>\n<h1 id=\"code-classlanguage-textfastlanecode을-native-project-directory-에서-사용하기\"><a href=\"#code-classlanguage-textfastlanecode%EC%9D%84-native-project-directory-%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"code classlanguage textfastlanecode을 native project directory 에서 사용하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">Fastlane</code>을 Native Project Directory 에서 사용하기</h1>\n<ul>\n<li>아래 서술하는 내용은 공식 문서와 동일하다.\n<a href=\"https://docs.fastlane.tools/getting-started/ios/setup/\">IOS Setup - fastlane docs</a>\n<a href=\"https://docs.fastlane.tools/getting-started/android/setup/\">Android Setup - fastlane docs</a></li>\n<li>\n<p>우선 fastlane을 사용하기 위해서는 글로벌로 설치를 해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Using RubyGems</span>\n$ <span class=\"token function\">sudo</span> gem <span class=\"token function\">install</span> fastlane -NV\n$ <span class=\"token function\">sudo</span> gem <span class=\"token function\">install</span> bundler</code></pre></div>\n</li>\n</ul>\n<h1 id=\"위-명령어가-실행-불가능-하다면-대안으로-아래-명령어를-실행한다\"><a href=\"#%EC%9C%84-%EB%AA%85%EB%A0%B9%EC%96%B4%EA%B0%80-%EC%8B%A4%ED%96%89-%EB%B6%88%EA%B0%80%EB%8A%A5-%ED%95%98%EB%8B%A4%EB%A9%B4-%EB%8C%80%EC%95%88%EC%9C%BC%EB%A1%9C-%EC%95%84%EB%9E%98-%EB%AA%85%EB%A0%B9%EC%96%B4%EB%A5%BC-%EC%8B%A4%ED%96%89%ED%95%9C%EB%8B%A4\" aria-label=\"위 명령어가 실행 불가능 하다면 대안으로 아래 명령어를 실행한다 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>위 명령어가 실행 불가능 하다면 대안으로 아래 명령어를 실행한다.</h1>\n<h1 id=\"alternatively-using-homebrew\"><a href=\"#alternatively-using-homebrew\" aria-label=\"alternatively using homebrew permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Alternatively using Homebrew</h1>\n<p>$ brew cask install fastlane\n$ sudo gem install bundler</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- 첫 번째로 ios 폴더에 들어가서 초기화를 진행한다.\n```bash\n$ cd ios # DevOpsForRN/ios\n$ fastlane init # 초기화</code></pre></div>\n<ul>\n<li>\n<p>다음과 같이 어느 걸 하고 싶으냐고 나올 텐데 우리는 여러 가지 일들을 manual하고 싶으니 4번을 선택한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[13:48:34]: What would you like to use fastlane for?</code></pre></div>\n</li>\n<li>📸  Automate screenshots</li>\n<li>👩‍✈️  Automate beta distribution to TestFlight</li>\n<li>🚀  Automate App Store distribution</li>\n<li>\n<p>🛠  Manual setup - manually setup your project to automate\n$ 4</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"></code></pre></div>\n</li>\n</ul>\n<p>명령어를 치고나면</p>\n<ul>\n<li><code class=\"language-text\">DevOpsForRN/ios/fastlane/Appfile</code> -> 프로젝트나 account config(app<em>identifier, apple</em>id)</li>\n<li><code class=\"language-text\">DevOpsForRN/ios/fastlane/Fastfile</code> -> 실제 돌릴 명령어들을 정의</li>\n<li><code class=\"language-text\">DevOpsForRN /ios/fastlane/Readme</code> -> 설명서, lane을 추가할때 자동으로 변경됨</li>\n<li><code class=\"language-text\">DevOpsForRN /ios/fastlane/report.xml</code> -> fastlane 명령어를 돌릴때마다 변경되는 report 문서</li>\n</ul>\n<blockquote>\n<p>실제로는 <code class=\"language-text\">Appfile</code> 은 정해진 계정, <strong>bundle identifier</strong>등을 맨 처음 한번만 정의하면 되고 <code class=\"language-text\">Fastfile</code>의 경우는 <strong>lane(작업들의 집합)</strong>을 정의할 때만 수정하면 된다.\n다음 빌드로 넘어가기 전에, 한 가지를 짚고 가야 한다. <strong>IOS</strong> 에서는 <strong>Code Signing</strong>이라는 개념이 굉장히 중요하다. <strong>Code Signing을 하지 않으면 Beta testing service에 올리거나, App Store에 Deploy 할 수 없다.</strong>\n<code class=\"language-text\">Fastlane</code>에는  <strong>3가지 signing 방법</strong>이 있다.</p>\n</blockquote>\n<h1 id=\"fastlane의-3가지-signing\"><a href=\"#fastlane%EC%9D%98-3%EA%B0%80%EC%A7%80-signing\" aria-label=\"fastlane의 3가지 signing permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fastlane의 3가지 Signing</h1>\n<ul>\n<li><strong>Match</strong> -> <strong>private key</strong>와 <strong>certificates</strong>를 <code class=\"language-text\">git</code>에 암호화하여 보관하고, 이를 가지고 signing하는 방법</li>\n<li><strong>Cert and Sigh</strong> -> private key와 certificates를  <code class=\"language-text\">local</code>에서 가지고 있고, 이를 signing하는 방법</li>\n<li><strong>Manual</strong> -> Apple Developer Portal에서  <code class=\"language-text\">.p12</code>, <code class=\"language-text\">.cer</code>, <code class=\"language-text\">. mobileprovision</code>을 직접 signing 하는 방법</li>\n</ul>\n<blockquote>\n<p>1번 방법(Match)<strong>이 암호화된 인증서를 git에 올리는 게 다소 이상할 수 있지만  이 방식은 생각보다 안전하고, **새로운 팀 멤버가 들어올 경우</strong> 아니면 <strong>새로운 개발 장비를 세팅 할때도 쉽고 간편</strong>하므로 <strong>1번 방법</strong>으로 선택했다.\n<code class=\"language-text\">Code Signing</code>에 대하여 더 자세히 이해하고 싶다면 <a href=\"https://codesigning.guide/\">Code Signing Guide for Teams</a> 문서를 참조하자.</p>\n</blockquote>\n<h1 id=\"apple-developer-portal에서-bundle-identifier-생성\"><a href=\"#apple-developer-portal%EC%97%90%EC%84%9C-bundle-identifier-%EC%83%9D%EC%84%B1\" aria-label=\"apple developer portal에서 bundle identifier 생성 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Apple Developer Portal에서 Bundle Identifier 생성</h1>\n<ul>\n<li><a href=\"https://developer.apple.com/account/ios/identifier/bundle\">Apple Developer Portal</a> 에서 <strong>bundle identifier</strong>를 만든다</li>\n<li>좌측 탭에서 <strong>Identifiers</strong> -> <strong>App IDs</strong></li>\n<li>우측 상단에 <strong>+</strong> 버튼 클릭</li>\n<li>앱 이름을 입력</li>\n<li><code class=\"language-text\">com.teammondrian.devopsrn</code> 와 같은 당신이 만들 <strong>identifier</strong> 입력</li>\n<li><strong>Done</strong>을 클릭\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/apple-create-bundleid.png?raw=true\" alt=\"apple-create-bundleid\"></li>\n</ul>\n<h1 id=\"fastlane-설정-파일-수정\"><a href=\"#fastlane-%EC%84%A4%EC%A0%95-%ED%8C%8C%EC%9D%BC-%EC%88%98%EC%A0%95\" aria-label=\"fastlane 설정 파일 수정 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Fastlane 설정 파일 수정</h1>\n<p>다음은 <a href=\"https://docs.fastlane.tools/actions/match/\">match - fastlane docs</a> 을 따라 하는 내용과 동일하다</p>\n<ul>\n<li>첫번째로 <strong>private key</strong>와 <strong>certificate</strong>를 담을 <a href=\"https://github.com/new\">Github Repository</a>를 새로 하나 생성한다.</li>\n<li>\n<p>주의할 점이 하나 있는데 민감한 정보를 담기 때문에 <strong>Private Repository</strong> 로 만들어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DevOpsForRN/ios 폴더에서 진행한다.</span>\n$ fastlane match init\n<span class=\"token comment\"># 명령어를 입력하고, 방금전 만든 github-repo주소를 넣는다.</span>\n$ fastlane match appstore\n<span class=\"token comment\"># 애플 아이디와 비밀번호를 묻는다.</span>\n<span class=\"token comment\"># 이전에 만든 `com.teammondrian.devopsrn` 와 같은 identifier를 입력한다</span>\n<span class=\"token comment\"># passphrase -> 파일들을 암호화할 비밀번호를 입력한다. (자기가 만들 비밀번호)</span></code></pre></div>\n</li>\n<li>그러면 <code class=\"language-text\">DevOpsForRN/ios/fastlane/Matchfile</code>이 만들어 지는데, 다음과 동일하도록 수정한다.</li>\n<li><code class=\"language-text\">type &quot;development&quot;</code> 를 <code class=\"language-text\">type &quot;appstore&quot;</code> 로 수정한다.</li>\n<li><code class=\"language-text\">app_identifier [&quot;com.teammondrian.devopsrn&quot;]</code>에서 <code class=\"language-text\">com.teammondrian.devopsrn</code> 를 당신의 <strong>Bundle Identifier</strong>로 변경한 후 추가한다.</li>\n<li>\n<p><code class=\"language-text\">username &quot;yoohoogun114@naver.com&quot;</code> 와 같이 이메일을 당신의 <strong>Apple ID</strong>로 변경후 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">git_url &quot;https://github.com/philographer/create-react-bootstrap-match.git&quot; # 당신이 생성한 git repo의 주소를 입력</code></pre></div>\n</li>\n</ul>\n<p>type “appstore” # 기본값은 development이지만, appstore로 수정한다. appstore, adhoc, enterprise or development가 될 수 있다.</p>\n<p>app_identifier [“com.teammondrian.devopsrn”] # 당신이 생성한 bundle identifier 입력\nusername “yoohoogun114@naver.com” # 당신의 apple id로 수정</p>\n<h1 id=\"for-all-available-options-run-code-classlanguage-textfastlane-match---helpcode\"><a href=\"#for-all-available-options-run-code-classlanguage-textfastlane-match---helpcode\" aria-label=\"for all available options run code classlanguage textfastlane match   helpcode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For all available options run <code class=\"language-text\">fastlane match --help</code></h1>\n<h1 id=\"remove-the--in-the-beginning-of-the-line-to-enable-the-other-options\"><a href=\"#remove-the--in-the-beginning-of-the-line-to-enable-the-other-options\" aria-label=\"remove the  in the beginning of the line to enable the other options permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Remove the # in the beginning of the line to enable the other options</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- `DevOpsForRN/ios/fastlane/Fastfile` 도 파일이 다음과 동일하도록 수정한다.\n- 아래 부분에서, `&quot;com.teammondrian.devopsrn”` 로 되어 있는 부분을 당신의 **Bundle Identifier**로 변경한다.\n```ruby\n# This file contains the fastlane.tools configuration\n# You can find the documentation at https://docs.fastlane.tools\n#\n# For a list of all available actions, check out\n#\n#     https://docs.fastlane.tools/actions\n#\n\n# Uncomment the line if you want fastlane to automatically update itself\n# update_fastlane\n\ndefault_platform(:ios)\n\nplatform :ios do\n  desc &quot;Build and run tests&quot;\n  lane :test do\n    scan(scheme: &quot;DevOpsForRN&quot;)\n  end\n\n  lane :beta do\n    desc &quot;TesfFlight for IOS&quot;\n    # Circle CI does not create new code signing certificates or provisioning profiles.\n    sync_code_signing(type: &quot;appstore&quot;, readonly: true, app_identifier: &quot;com.teammondrian.devopsrn&quot;) # Bundle Identifier를 아까 만든 값으로 치환한다.\n    # see code signing guide for more information, readonly because of CircleCI\n    build_app(scheme: &quot;DevOpsForRN&quot;)\n    upload_to_testflight(skip_waiting_for_build_processing: true)\n    # slack(\n    #   slack_url: &quot;https://hooks.slack.com/services/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&quot;\n    #   channel: &quot;dev&quot;,\n    #   message: &quot;Successfully uploaded a fastlane beta release&quot;\n    # )\n  end\nend\n\nlane :increase_build_number_and_push_to_beta do |values|\n    # Increment the build number (not the version number)\n    # Providing the xcodeproj is optional\n    increment_build_number(xcodeproj: &quot;DevOpsForRN.xcodeproj&quot;)\n    # Commit the version bump\n    commit_version_bump(xcodeproj: &quot;DevOpsForRN.xcodeproj&quot;, force: true)\n    # Add a git tag for this build. This will automatically\n    # use an appropriate git tag name\n    add_git_tag\n    # Push the new commit and tag back to your git remote\n    push_to_git_remote(\n        remote_branch: &quot;beta&quot;, # optional, default is set to local_branch\n        force: true,    # optional, default: false\n    )\nend</code></pre></div>\n<ul>\n<li><code class=\"language-text\">DevOpsForRN/ios/fastlane/Appfile</code> 도 파일이 다음과 동일하도록 수정한다.</li>\n<li><code class=\"language-text\">app_identifier &quot;com.teammondrian.com&quot;</code> 에서 <code class=\"language-text\">com.teammondrian.com</code> 부분을 당신의 <strong>Bundle Identifier</strong> 로 변경 후 추가한다.</li>\n<li>\n<p><code class=\"language-text\">apple_id &quot;yoohoogun114@naver.com&quot;</code> 와 같이 이메일을 당신의 <strong>Apple ID</strong>로 변경후 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">app_identifier &quot;com.teammondrian.com&quot; # The bundle identifier of your app\napple_id &quot;yoohoogun114@naver.com&quot; # Your Apple email address</code></pre></div>\n</li>\n</ul>\n<h1 id=\"for-more-information-about-the-appfile-see\"><a href=\"#for-more-information-about-the-appfile-see\" aria-label=\"for more information about the appfile see permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For more information about the Appfile, see:</h1>\n<h1 id=\"httpsdocsfastlanetoolsadvancedappfile\"><a href=\"#httpsdocsfastlanetoolsadvancedappfile\" aria-label=\"httpsdocsfastlanetoolsadvancedappfile permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.fastlane.tools/advanced/#appfile\">https://docs.fastlane.tools/advanced/#appfile</a></h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- IOS의 경우, TestFlight에 올리려면 **Image Assets** 들을 올려야 한다.  테스트 용도이므로, [Free vector icons](https://www.flaticon.com/) 에서 자기가 원하는 이미지를 선택하고\n![use_asset_catalog.png](https://github.com/philographer/DevOpsForRN/blob/master/images/use_asset_catalog.png?raw=true)\n\n**Use Asset Catalog**를 클릭하고 필요한 Aseets들을 집어넣는다.\n작성자는 [Asset Catalog Creator Pro](https://itunes.apple.com/kr/app/asset-catalog-creator-pro/id809625456?mt=12) 를 사용하였지만, 인터넷에서 다른 **Asset Generator**를 사용해도 무관하다.\n\n# Itunse-Connect 앱 등록\n- [iTunes Connect](https://itunesconnect.apple.com/login)에 로그인\n- 나의 앱 -&gt; + 버튼 -&gt; 신규 앱\n- 플랫폼 -&gt; ios 체크\n- 나머지 내용들을 채우고, **번들 ID** 는 이전에 Developer Portal에서 만든 **Bundle Identifier**를 선택한다.\n![itunes-create-app](https://github.com/philographer/DevOpsForRN/blob/master/images/itunes-create-app.png?raw=true)\n\n# Fastlane on the CircleCI\n이제 대망의 `CircleCI`와 `Fastlane`을 연동할 차례이다. 이를 위해서는 [Continuous Integration - fastlane docs](https://docs.fastlane.tools/best-practices/continuous-integration/#circleci-integration) 문서를 따라해보자.\n\n- `DevOpsForRN/ios/fastlane/Fastfile` 경로에 다음과 같이 추가하자.</code></pre></div>\n<h1 id=\"devopsforrniosfastlanefastfile\"><a href=\"#devopsforrniosfastlanefastfile\" aria-label=\"devopsforrniosfastlanefastfile permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DevOpsForRN/ios/fastlane/Fastfile</h1>\n<p>…\nplatform :ios do\nbefore<em>all do\nsetup</em>circle_ci\nend</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">desc &quot;Build and run tests&quot;</code></pre></div>\n<p>…\nend</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- `DevOpsForRN/ios/fastlane/Fastfile` 의 완성된 내용은 다음과 같다.</code></pre></div>\n<h1 id=\"this-file-contains-the-fastlanetools-configuration\"><a href=\"#this-file-contains-the-fastlanetools-configuration\" aria-label=\"this file contains the fastlanetools configuration permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>This file contains the fastlane.tools configuration</h1>\n<h1 id=\"you-can-find-the-documentation-at-httpsdocsfastlanetools\"><a href=\"#you-can-find-the-documentation-at-httpsdocsfastlanetools\" aria-label=\"you can find the documentation at httpsdocsfastlanetools permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>You can find the documentation at <a href=\"https://docs.fastlane.tools\">https://docs.fastlane.tools</a></h1>\n<h1 id=\"\"><a href=\"#\" aria-label=\" permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h1 id=\"for-a-list-of-all-available-actions-check-out\"><a href=\"#for-a-list-of-all-available-actions-check-out\" aria-label=\"for a list of all available actions check out permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>For a list of all available actions, check out</h1>\n<h1 id=\"-1\"><a href=\"#-1\" aria-label=\" 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h1 id=\"httpsdocsfastlanetoolsactions\"><a href=\"#httpsdocsfastlanetoolsactions\" aria-label=\"httpsdocsfastlanetoolsactions permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://docs.fastlane.tools/actions\">https://docs.fastlane.tools/actions</a></h1>\n<h1 id=\"-2\"><a href=\"#-2\" aria-label=\" 2 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a></h1>\n<h1 id=\"uncomment-the-line-if-you-want-fastlane-to-automatically-update-itself\"><a href=\"#uncomment-the-line-if-you-want-fastlane-to-automatically-update-itself\" aria-label=\"uncomment the line if you want fastlane to automatically update itself permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Uncomment the line if you want fastlane to automatically update itself</h1>\n<h1 id=\"update_fastlane\"><a href=\"#update_fastlane\" aria-label=\"update_fastlane permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>update_fastlane</h1>\n<p>default_platform(:ios)</p>\n<p>platform :ios do\nbefore<em>all do\nsetup</em>circle_ci\nend</p>\n<p>  desc “Build and run tests”\nlane :test do\nscan\nend</p>\n<p>  lane :beta do\ndesc “TesfFlight for IOS”\n# Circle CI does not create new code signing certificates or provisioning profiles.\nsync<em>code</em>signing(type: “appstore”, readonly: true, app<em>identifier: “com.teammondrian.devopsrn”) # Bundle Identifier를 아까 만든 값으로 치환한다.\n# see code signing guide for more information, readonly because of CircleCI\nbuild</em>app(scheme: “DevOpsForRN”)\nupload<em>to</em>testflight(skip<em>waiting</em>for<em>build</em>processing: true)\n# slack(\n#   slack_url: ”<a href=\"https://hooks.slack.com/services/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\">https://hooks.slack.com/services/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</a>”\n#   channel: “dev”,\n#   message: “Successfully uploaded a fastlane beta release”\n# )\nend\nend</p>\n<p>lane :increase<em>build</em>number<em>and</em>push<em>to</em>beta do |values|\n# Increment the build number (not the version number)\n# Providing the xcodeproj is optional\nincrement<em>build</em>number(xcodeproj: “DevOpsForRN.xcodeproj”)\n# Commit the version bump\ncommit<em>version</em>bump(xcodeproj: “DevOpsForRN.xcodeproj”, force: true)\n# Add a git tag for this build. This will automatically\n# use an appropriate git tag name\nadd<em>git</em>tag\n# Push the new commit and tag back to your git remote\npush<em>to</em>git<em>remote(\nremote</em>branch: “beta”, # optional, default is set to local_branch\nforce: true,    # optional, default: false\n)\nend</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- `DevOpsForRN` 폴더 안에 `.circleci`라는 디렉토리를 만든다.\n- `DevOpsForRN/.circleci/config.yml` 에는 다음의 내용을 추가하자</code></pre></div>\n<h1 id=\"circleciconfigyml\"><a href=\"#circleciconfigyml\" aria-label=\"circleciconfigyml permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>.circleci/config.yml</h1>\n<h1 id=\"to-validate-your-configyml-then-use-this-cli\"><a href=\"#to-validate-your-configyml-then-use-this-cli\" aria-label=\"to validate your configyml then use this cli permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>To Validate your config.yml then use this cli.</h1>\n<h1 id=\"code-classlanguage-text-circleci-config-validate--c-circleciconfigymlcode\"><a href=\"#code-classlanguage-text-circleci-config-validate--c-circleciconfigymlcode\" aria-label=\"code classlanguage text circleci config validate  c circleciconfigymlcode permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">$ circleci config validate -c .circleci/config.yml</code></h1>\n<p>version: 2\njobs:\nbuild:\nworking<em>directory: ~/project\ndocker:\n- image: circleci/node:8\nsteps:\n- checkout\n- run: yarn\n- run: yarn run test\n- persist</em>to<em>workspace:\nroot: ~/project\npaths:\n- node</em>modules\n- store<em>test</em>results:\npath: ~/project/junit.xml</p>\n<p>  beta-deploy-ios:\nworking<em>directory: ~/project/ios\nmacos:\nxcode: “9.0”\nsteps:\n- checkout:\npath: ~/project\n- attach</em>workspace:\nat: ~/project\n- run: bundle update fastlane\n- run: bundle exec fastlane beta</p>\n<p>  ios:\nmacos:\nxcode: “9.0”\nworking<em>directory: ~/project/ios\nenvironment:\nFL</em>OUTPUT<em>DIR: ~/project/output\nshell: /bin/bash —login -o pipefail\nsteps:\n- checkout:\npath: ~/project\n- run:\nname: Set Ruby Version\ncommand:  echo “ruby-2.4” > ~/.ruby-version\n# Not using a workspace here as Node and Yarn versions\n# differ between the macOS image and the Docker containers above.\n- run: yarn\n- run: bundle install —path vendor/bundle\n- persist</em>to<em>workspace:\nroot: ~/project\npaths:\n- ios\n- run: bundle exec fastlane test\n- store</em>artifacts:\npath: ~/project/output\n- store<em>test</em>results:\npath: ~/project/output/scan</p>\n<p>workflows:\nversion: 2\nnode-android-ios:\njobs:\n- build\n- ios:\nrequires:\n- build\n- beta-deploy-ios:\nfilters:\nbranches:\nonly:\n- beta\nrequires:\n- ios</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">`CircleCI`에서 Code Signing, Fastlane Match를 이용하기 위해서는 다소 많은 **초기 작업**이 필요하다. 다음 문서를 따라 하면 일련의 초기화, key setting 작업을 완료할 수 있다. [Setting Up Code Signing for iOS Projects - CircleCI](https://circleci.com/docs/2.0/ios-codesigning/)\n\n- Github에 프로젝트 모두 올리기\n[Github Repository](https://github.com/new)를 새로 하나 생성한다.\n```bash\n# DevOpsForRN/ 디렉토리에서 진행한다.\n$ git init\n$ git remote add origin https://github.com/philographer/DevOpsForRN.git # 자신의 repo 주소로 변경하기\n$ git add --all\n$ git commit -m &quot;first commit&quot;\n$ git push -u origin master</code></pre></div>\n<ul>\n<li>CircleCI의 Project를 생성한다.</li>\n<li><a href=\"https://circleci.com/dashboard\">CircleCI - Dashboard</a> 접속</li>\n<li><strong>MacOS 빌드는 유료이므로, 무료 플랜을 선택한다.</strong></li>\n<li>좌측 <strong>Settings</strong> -> <strong>MacOS Plan</strong> -> <strong>Trial Plan</strong> Click</li>\n<li>좌측 <strong>Project</strong> 탭 클릭 -> <strong>Add Project</strong> 클릭</li>\n<li>방금 만든 Github Repo의 오른쪽에 <strong>Setup Project</strong> 버튼을 클릭</li>\n<li>OS는 <strong>macOS</strong> 선택</li>\n<li><strong>Start Build</strong> 버튼 선택</li>\n<li>Work-Flow 탭으로 이동되는데, 자세히 보려면 빌드 이름을 누르면 된다.</li>\n<li>다음과 같이 보이면 성공이다.\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/circleci_ios_build.png?raw=true\" alt=\"circleci_ios_build.png\"></li>\n<li>CircleCI의 <strong>Project Setting</strong> -> <strong>Environment Variables</strong> -> <strong>Add Variable</strong> 을 클릭하고, 다음의 환경변수들을 추가한다.\n<code class=\"language-text\">MATCH_PASSWORD</code>: 아까 만든 match pass phrase 입력\n<code class=\"language-text\">FASTLANE_USER</code>: Apple ID 입력 (ex. <code class=\"language-text\">yoohoogun114@naver.com</code>)\n<code class=\"language-text\">FASTLANE_PASSWORD</code>:  Apple PW 입력\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/circleci_ios_env.png?raw=true\" alt=\"circleci_ios_env.png\"></li>\n<li>CircleCI의 <strong>Project Setting</strong> -> <strong>Checkout SSH Keys</strong> -> <strong>Add Deploy Key</strong> 버튼 또는 <strong>Create and add … user key</strong> 버튼을 클릭한다.\n그렇다면 후에 CI에서 debug 해야 할 ssh-key를 자동으로 vm에 미리 넣어준다. 따라서 미리 지정해둔 계정에서는 ci vm에 접근할 수 있다.\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/circleci_ssh.png?raw=true\" alt=\"circleci_ssh.png\"></li>\n</ul>\n<h2 id=\"trigger-script-작성\"><a href=\"#trigger-script-%EC%9E%91%EC%84%B1\" aria-label=\"trigger script 작성 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Trigger Script 작성</h2>\n<ul>\n<li><code class=\"language-text\">DevOpsForRN/package.json</code> 파일을 다음과 같이 수정한다</li>\n<li><code class=\"language-text\">scripts</code>에 <code class=\"language-text\">native-test</code>  추가</li>\n<li>\n<p><code class=\"language-text\">scripts</code>에 <code class=\"language-text\">beta</code>  추가</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"DevOpsForRN\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"private\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node node_modules/react-native/local-cli/cli.js start\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"jest\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"native-test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tools/run_native_test.sh\"</span><span class=\"token punctuation\">,</span> # 추가\n<span class=\"token property\">\"beta\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tools/run_beta_deploy.sh\"</span><span class=\"token punctuation\">,</span> # 변경\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"dependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"react\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"16.2.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"react-native\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.52.1\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"react-native-fabric\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^0.5.1\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"babel-jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22.1.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"babel-preset-react-native\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"4.0.0\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"22.1.4\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"react-test-renderer\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"16.2.0\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"jest\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n<span class=\"token property\">\"preset\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-native\"</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>Shell Script 작성하기</li>\n<li><code class=\"language-text\">DevOpsForRN/tools</code> 디렉토리를 생성한다</li>\n<li>\n<p><code class=\"language-text\">DevOpsForRN/tools/run_beta_deploy.sh</code> 파일을 생성하고, 다음의 내용을 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span></code></pre></div>\n</li>\n</ul>\n<p>cd ios\nfastlane increase<em>build</em>number<em>and</em>push<em>to</em>beta</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- `DevOpsForRN/tools/run_native_test.sh` 파일을 생성하고, 다음의 내용을 작성한다.\n```bash\n#!/usr/bin/env bash\n\ncd ios\nfastlane test</code></pre></div>\n<ul>\n<li>\n<p>작성한 후, 권한을 부여한다</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">chmod</span> +x run_beta_deploy.sh\n$ <span class=\"token function\">chmod</span> +x run_beta_deploy.sh</code></pre></div>\n</li>\n</ul>\n<h1 id=\"xcode-signing-설정\"><a href=\"#xcode-signing-%EC%84%A4%EC%A0%95\" aria-label=\"xcode signing 설정 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Xcode Signing 설정</h1>\n<ul>\n<li>fastlane에서 사용할 인증서를 선택한다.\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/xcode_sign.png?raw=true\" alt=\"xcode_sign.png\"></li>\n</ul>\n<h1 id=\"testflight에-사용자-초대\"><a href=\"#testflight%EC%97%90-%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%B4%88%EB%8C%80\" aria-label=\"testflight에 사용자 초대 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>TestFlight에 사용자 초대</h1>\n<ul>\n<li><a href=\"https://itunesconnect.apple.com/\">iTunes Connect</a> 에 접속</li>\n<li>나의 앱 -> 자신이 이전에 만들었던 앱 클릭</li>\n<li>TestFlight 탭 클릭</li>\n<li>테스터 및 그룹 -> Itunes Connect 사용자 클릭</li>\n<li>\n<ul>\n<li>버튼 누르고, 사용자 초대</li>\n</ul>\n</li>\n<li>초대한 사용자의 이메일에서 초대 수락\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/itunes_invite.png?raw=true\" alt=\"itunes_invite\"></li>\n</ul>\n<h1 id=\"암호화\"><a href=\"#%EC%95%94%ED%98%B8%ED%99%94\" aria-label=\"암호화 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>암호화</h1>\n<ul>\n<li>앱 내 추가 기능</li>\n<li>암호화 탭의 지침에 따른다.\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/ios_encrypt.png?raw=true\" alt=\"ios_encrypt\"></li>\n</ul>\n<h1 id=\"작성한-내용-검증하기\"><a href=\"#%EC%9E%91%EC%84%B1%ED%95%9C-%EB%82%B4%EC%9A%A9-%EA%B2%80%EC%A6%9D%ED%95%98%EA%B8%B0\" aria-label=\"작성한 내용 검증하기 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작성한 내용 검증하기</h1>\n<p>다음의 스크립트를 실행했을 때, Circle CI에서 work-flow가 올바르게 실행되나 지켜본다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DevOps/ 디렉토리에서</span>\n$ <span class=\"token function\">npm</span> run beta</code></pre></div>\n<ul>\n<li><a href=\"https://circleci.com/dashboard\">CircleCI Dashboard</a> 접속</li>\n<li>다음과 같이 JS Test -> IOS Native Test -> TestFlight Deploy가 성공했는지 확인\n<img src=\"https://github.com/philographer/DevOpsForRN/blob/master/images/circleci_ios_success.png?raw=true\" alt=\"circleci_ios_success.png\"></li>\n</ul>\n<h1 id=\"next\"><a href=\"#next\" aria-label=\"next permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Next</h1>\n<ul>\n<li><a href=\"https://philographer.github.io/2018/02/15/circleci-rn3/\">Fastlane, CircleCI를 이용하여 React Native DevOps 도입기 (3)</a></li>\n<li><a href=\"https://philographer.github.io/2018/02/15/circleci-rn4/\">Fastlane, CircleCI를 이용하여 React Native DevOps 도입기 (4)</a></li>\n</ul>\n<h1 id=\"reference\"><a href=\"#reference\" aria-label=\"reference permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reference</h1>\n<p><a href=\"https://docs.fastlane.tools/actions/match/#is-this-secure\">match is-this-secure? - fastlane docs</a>\n<a href=\"https://github.com/CircleCI-Public/circleci-demo-react-native\">GitHub - CircleCI-Public/circleci-demo-react-native: A demo React Native project that’s building on CircleCI 2.0 with Workflows.</a>\n<a href=\"https://medium.com/react-native-training/fastlane-for-react-native-ios-android-app-devops-8ca85bee614e\">fastlane for React Native iOS &#x26; Android app DevOps – React Native Training – Medium</a>\n<a href=\"https://github.com/CircleCI-Public/circleci-demo-workflows/blob/workspace-forwarding/.circleci/config.yml\">circleci-demo-workflows/config.yml at workspace-forwarding · CircleCI-Public/circleci-demo-workflows · GitHub</a></p>","frontmatter":{"title":"Fastlane, CircleCI를 이용하여 React Native DevOps 도입기 (2)","date":"February 15, 2018"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/development/circleci-rn2/","previous":{"fields":{"slug":"/development/circleci-rn1/"},"frontmatter":{"title":"Fastlane, CircleCI를 이용하여 React Native DevOps 도입기 (1)","categories":["DevOps"]}},"next":{"fields":{"slug":"/development/circleci-rn3/"},"frontmatter":{"title":"Fastlane, CircleCI를 이용하여 React Native DevOps 도입기 (3)","categories":["DevOps"]}}}}}